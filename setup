#!/bin/sh

if [[ ! -d ~/bin ]]; then
  mkdir ~/bin
fi

echo "Installing Homebrew..."
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

echo "Creating symlinks..."
ln -s `pwd`/shell/config ~/.config
ln -s `pwd`/shell/aliases ~/.aliases
ln -s `pwd`/shell/bashrc ~/.bashrc
ln -s `pwd`/shell/zshrc ~/.zshrc
ln -s `pwd`/ruby/gemrc ~/.gemrc

echo "Setting up Vim..."
ln -s `pwd`/vim ~/.vim
ln -s `pwd`/vim/colors ~/.vim/colors
ln -s `pwd`/vim/vimrc ~/.vimrc
vim +BundleInstall +qall

echo "Setting up Sublime..."
ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" /usr/local/bin/sublime
ln -s `pwd`/sublime/Preferences.sublime-settings "/Users/`whoami`/Library/Application Support/Sublime Text 3/Packages/User/Preferences.sublime-settings"
ln -s `pwd`/sublime/Package\ Control.sublime-settings "/Users/`whoami`/Library/Application Support/Sublime Text 3/Packages/User/Package Control.sublime-settings"
ln -s `pwd`/sublime/Default\ \(OSX\).sublime-keymap "/Users/`whoami`/Library/Application Support/Sublime Text 3/Packages/User/Default (OSX).sublime-keymap"

echo "Setting up Git..."
cat ./git/ignore > ~/.gitignore_global
cat ./git/attributes > ~/.gitattributes
git config --global core.excludesfile ~/.gitignore_global
cp ./git/git-diff.sh ~/bin/git-diff.sh
sudo chmod u+x ~/bin/git-diff.sh
git config --global diff.external ~/bin/git-diff.sh

echo "User settings"
git config --global user.name "Filipe Fernandes"
git config --global user.email contato@filipefernandes.com.br
git config --global core.editor "subl -n -w"
git config --global color.ui true
git config --global push.default matching

echo "Installing Oh My ZSH..."
curl -L https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh | sh

echo "Installing You Tube Downloader..."
sudo curl https://yt-dl.org/downloads/2015.06.15/youtube-dl -o /usr/local/bin/youtube-dl
sudo chmod a+rx /usr/local/bin/youtube-dl
